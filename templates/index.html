<!DOCTYPE html>
<html data-bs-theme="light" lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>1</title>
    <link rel="stylesheet" href="{{ url_for('static',filename='bootstrap/css/bootstrap.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static',filename='css/Bold-BS4-Jumbotron-with-Particles-js-particles-js.css') }}">
    <link rel="stylesheet" href="{{ url_for('static',filename='css/Bold-BS4-Jumbotron-with-Particles-js.css') }}">
</head>

<body>
    <nav class="navbar navbar-expand-md bg-body">
        <div class="container-fluid">
            {{navbar | safe}}
                
                <button
                data-bs-toggle="collapse" class="navbar-toggler" data-bs-target="#navcol-1"><span
                    class="visually-hidden">Toggle navigation</span><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse" id="navcol-1">
                <ul class="navbar-nav">
                    <li class="nav-item"></li>
                    <li class="nav-item"></li>
                    <li class="nav-item"></li>
                </ul>
            </div>
        </div>
    </nav>
    <div>
        <div class="p-5 mb-4 bg-light round-3">
            <div class="container-fluid py-5">
                <h6 class="display-6 fw-bold" style="font-size: 15px;">Your Scan results will be saved and available in 'Previous Tests'</h6>
                <h6 class="display-6 fw-bold" style="font-size: 15px;">Press on 'Fujitora Port Scanner' to do a new scan</h6>
                <h1 class="display-5 fw-bold">Enter your Scanning Details</h1>
                <div>
                        <form action="{{ url_for('result')}}" method="post" style="padding: 2%;">
                        <div class="form-group"><label class="control-label">Name</label><input type="text" name="Name"
                                placeholder="Give a Unique Name" class="form-control" required /></div>
                        <div class="form-group"><label class="control-label">Enter IP</label><input type="text"
                                name="ip_address" placeholder="Enter IP Addresses like '127.0.0.1, 127.0.0.2' or '192.1.1.1-3'" class="form-control" required /></div>
                        <div class="form-group"><label class="control-label">Enter Port Numbers</label><input
                                type="text" name="portnumbers" placeholder="Enter Port Numbers like '80-85' or '79,30,60-65'" class="form-control" /></div><button
                            name="" type="submit" class="btn btn-primary">Submit</button>
                    </form>
                </div>                
                <h6 class="display-6">To check your loading status, check the terminal you are running this Flask Program. Since this website requires more development, the loading status bar will be expected in future versions.</h6>
                <a href="https://github.com/7uv4n/fujitora-port-scanner-public"><h6 class="display-6">Original Github Link with README</h6></a>
            </div>
        </div>
    </div>
    <script src="{{ url_for('static', filename='bootstrap/js/bootstrap.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/Bold-BS4-Jumbotron-with-Particles-js-particles-js.js') }}"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Function to validate form inputs before submission
            function validateForm() {
                // Get form inputs
                var nameInput = document.querySelector('input[name="Name"]');
                var ipInput = document.querySelector('input[name="ip_address"]');
                var portInput = document.querySelector('input[name="portnumbers"]');
    
                // Regular expressions to match the intended formats
                // Regular expression to validate IP addresses and ranges
                var ipRegex = /^(\d{1,3}\.\d{1,3}\.\d{1,3}\.(\d{1,3}|\d{1,3}-\d{1,3})(,\s*\d{1,3}\.\d{1,3}\.\d{1,3}\.(\d{1,3}|\d{1,3}-\d{1,3}))*)$/;
                var portRegex = /^(\d+(-\d+)?)(,\s*\d+(-\d+)?)*$/;
    
                // Validate Name (should not be empty)
                if (nameInput.value.trim() === '') {
                    alert('Please enter a valid Name.');
                    return false;
                }
    
                // Validate IP Address
                if (!ipRegex.test(ipInput.value)) {
                    alert('Please enter a valid IP address(es) in the correct format.');
                    return false;
                }
    
                // Validate Port Numbers
                if (!portRegex.test(portInput.value)) {
                    alert('Please enter valid port number(s) in the correct format.');
                    return false;
                }
    
                // Form inputs are valid, proceed with submission
                return true;
            }
    
            // Handle form submission
            var form = document.querySelector('form');
            form.addEventListener('submit', function(event) {
                if (!validateForm()) {
                    event.preventDefault(); // Prevent form submission if validation fails
                }
            });
        });
    </script>
    
</body>

</html>