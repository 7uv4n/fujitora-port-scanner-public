<!DOCTYPE html>
<html data-bs-theme="light" lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Previously Tests</title>
    <link rel="stylesheet" href="{{ url_for('static',filename='bootstrap/css/bootstrap.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static',filename='fonts/fontawesome-all.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static',filename='fonts/ionicons.min.css') }}">
    <link rel="stylesheet"
        href="{{ url_for('static',filename='css/Bold-BS4-Jumbotron-with-Particles-js-particles-js.css') }}">
    <link rel="stylesheet" href="{{ url_for('static',filename='css/Bold-BS4-Jumbotron-with-Particles-js.css') }}">
</head>

<body>
    <nav class="navbar navbar-expand-md bg-body">
        <div class="container-fluid">
            {{ navbar | safe }}
            <button data-bs-toggle="collapse" class="navbar-toggler" data-bs-target="#navcol-1"><span
                    class="visually-hidden">Toggle navigation</span><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse" id="navcol-1">
                <ul class="navbar-nav">
                    <li class="nav-item"></li>
                    <li class="nav-item"></li>
                    <li class="nav-item"></li>
                </ul>
            </div>
        </div>
    </nav>
    <div>
        <div style="margin: 5%;">
            <h2 class="display-6 fw-bold">Previously Tests</h2>
            <div class="table-responsive">
                <table class="table" id="previousTestsTable">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Name</th>
                            <th>IP Address</th>
                            <th>Ports Scanned</th>
                            <th>Scan Summary JSON Payload</th>
                            <th>Scan Summary Dashboard</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for scan in previous_scans %}
                        <tr id="row_{{ scan[0] }}">
                            <td>{{ scan[5] }}</td> <!-- Date -->
                            <td>{{ scan[1] }}</td> <!-- Name -->
                            <td>{{ scan[2] }}</td> <!-- IP Address -->
                            <td>{{ scan[3] }}</td> <!-- Ports -->
                            <td><a href="{{ url_for('download_file', filename=scan[-3]) }}"><svg class="icon icon-tabler icon-tabler-json" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                <path d="M20 16v-8l3 8v-8"></path>
                                <path d="M15 8a2 2 0 0 1 2 2v4a2 2 0 1 1 -4 0v-4a2 2 0 0 1 2 -2z"></path>
                                <path d="M1 8h3v6.5a1.5 1.5 0 0 1 -3 0v-.5"></path>
                                <path d="M7 15a1 1 0 0 0 1 1h1a1 1 0 0 0 1 -1v-2a1 1 0 0 0 -1 -1h-1a1 1 0 0 1 -1 -1v-2a1 1 0 0 1 1 -1h1a1 1 0 0 1 1 1"></path>
                            </svg></a></td> <!-- Scan Summary JSON -->
                            <td><a href="{{ url_for('prev_dashboard', webs=scan[-2]) }}">
                            Link
                            </a></td> 
                            <td><a href="{{ url_for('delete_entry', id=scan[0]) }}"><i
                                        class="icon ion-android-delete"></i></a></td>

                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <script src="{{ url_for('static', filename='assets/bootstrap/js/bootstrap.min.js') }}"></script>
    <script
        src="{{ url_for('static', filename='assets/js/Bold-BS4-Jumbotron-with-Particles-js-particles-js.js') }}"></script>
    
</body>

</html>